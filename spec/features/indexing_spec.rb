require 'rails_helper'

describe 'Indexing' do
  fixtures = {
    'druid:yc714xp8382' => {:id=>"yc714xp8382",
      :modsxml=>"<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<mods xmlns:xlink=\"http://www.w3.org/1999/xlink\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:rdf=\"http://www.w3.org/1999/02/22-rdf-syntax-ns#\" xmlns=\"http://www.loc.gov/mods/v3\" version=\"3.5\" xsi:schemaLocation=\"http://www.loc.gov/mods/v3 http://www.loc.gov/standards/mods/v3/mods-3-5.xsd\">\n  <titleInfo>\n    <title>Easy chair, ottoman, and floor cushion details_x000B_(Includes drawings by FLW; appears to be an in-progress print)</title>\n  </titleInfo>\n  <name type=\"personal\" usage=\"primary\" authority=\"naf\" authorityURI=\"http://id.loc.gov/authorities/names\" valueURI=\"http://id.loc.gov/authorities/names/n94031868\">\n    <namePart>Wright, Frank Lloyd, 1867-1959</namePart>\n    <role>\n      <roleTerm type=\"code\" authority=\"marcrelator\" authorityURI=\"http://id.loc.gov/vocabulary/relators\" valueURI=\"http://id.loc.gov/vocabulary/relators/arc\">arc</roleTerm>\n      <roleTerm type=\"text\" authority=\"marcrelator\" authorityURI=\"http://id.loc.gov/vocabulary/relators\" valueURI=\"http://id.loc.gov/vocabulary/relators/arc\">architect</roleTerm>\n    </role>\n  </name>\n  <typeOfResource>still image</typeOfResource>\n  <genre authority=\"aat\" authorityURI=\"http://vocab.getty.edu/aat\" valueURI=\"http://vocab.getty.edu/aat/300028509\">diazotypes (copies)</genre>\n  <originInfo>\n    <dateCreated keyDate=\"yes\" encoding=\"w3cdtf\" point=\"start\">1900</dateCreated>\n    <dateCreated encoding=\"w3cdtf\" point=\"end\">1995</dateCreated>\n  </originInfo>\n  <language>\n    <languageTerm authority=\"iso639-2b\" authorityURI=\"http://id.loc.gov/vocabulary/iso639-2\" valueURI=\"http://id.loc.gov/vocabulary/iso639-2/eng\" type=\"code\">eng</languageTerm>\n    <languageTerm authority=\"iso639-2b\" authorityURI=\"http://id.loc.gov/vocabulary/iso639-2\" valueURI=\"http://id.loc.gov/vocabulary/iso639-2/eng\" type=\"text\">English</languageTerm>\n  </language>\n  <physicalDescription>\n    <extent>24 x 36 inches</extent>\n    <digitalOrigin>reformatted digital</digitalOrigin>\n    <internetMediaType>image/jpeg</internetMediaType>\n  </physicalDescription>\n  <subject authority=\"lcsh\" authorityURI=\"http://id.loc.gov/authorities/subjects\" valueURI=\"http://id.loc.gov/authorities/subjects/sh85098813\">\n    <topic>Paul R. Hanna House (Stanford, Calif.)</topic>\n  </subject>\n  <subject authority=\"lcsh\" authorityURI=\"http://id.loc.gov/authorities/subjects\" valueURI=\"http://id.loc.gov/authorities/subjects/sh85006839\">\n    <topic>Architecture, Modern</topic>\n    <temporal>20th century</temporal>\n    <geographic>United States</geographic>\n  </subject>\n  <subject authority=\"lcsh\" authorityURI=\"http://id.loc.gov/authorities/subjects\" valueURI=\"http://id.loc.gov/authorities/subjects/sh2009115399\">\n    <topic>Architecture</topic>\n    <geographic>California</geographic>\n    <topic>History</topic>\n    <temporal>20th century</temporal>\n  </subject>\n  <subject authority=\"lcsh\" authorityURI=\"http://id.loc.gov/authorities/subjects\" valueURI=\"http://id.loc.gov/authorities/subjects/sh85006735\">\n    <topic>Architecture, Domestic</topic>\n    <geographic>California</geographic>\n  </subject>\n  <location>\n    <physicalLocation type=\"repository\" authority=\"naf\" valueURI=\"http://id.loc.gov/authorities/names/no2014019980\">Stanford University. Libraries. Department of Special Collections and University Archives</physicalLocation>\n    <shelfLocator>SC0280</shelfLocator>\n    <url>https://purl.stanford.edu/yc714xp8382</url>\n  </location>\n  <relatedItem type=\"host\" displayLabel=\"Finding Aid\">\n    <titleInfo>\n      <title>Hanna House Collection (SC0280)</title>\n    </titleInfo>\n    <location>\n      <url>http://www.oac.cdlib.org/findaid/ark:/13030/kt238nf217/</url>\n    </location>\n  </relatedItem>\n  <relatedItem type=\"host\" displayLabel=\"Series\">\n    <titleInfo>\n      <title>Series 3</title>\n    </titleInfo>\n  </relatedItem>\n  <recordInfo>\n    <languageOfCataloging>\n      <languageTerm authority=\"iso639-2b\" authorityURI=\"http://id.loc.gov/vocabulary/iso639-2\" valueURI=\"http://id.loc.gov/vocabulary/iso639-2/eng\">eng</languageTerm>\n    </languageOfCataloging>\n    <recordContentSource authority=\"marcorg\" authorityURI=\"http://id.loc.gov/vocabulary/organizations\" valueURI=\"http://id.loc.gov/vocabulary/organizations/cst\">CSt</recordContentSource>\n  </recordInfo>\n  <relatedItem type=\"host\">\n    <titleInfo>\n      <title>Hanna House collection</title>\n    </titleInfo>\n    <location>\n      <url>https://purl.stanford.edu/gb597yd7556</url>\n    </location>\n    <typeOfResource collection=\"yes\"/>\n  </relatedItem>\n  <accessCondition type=\"useAndReproduction\">The materials are open for research use and may be used freely for non-commercial purposes with an attribution. For commercial permission requests, please contact the Stanford University Archives (universityarchives@stanford.edu).</accessCondition>\n  <relatedItem type=\"host\" displayLabel=\"Appears in\">\n    <titleInfo>\n      <title>Architectural drawings</title>\n    </titleInfo>\n    <location>\n      <url>http://purl.stanford.edu/jk193md4118</url>\n    </location>\n  </relatedItem>\n</mods>\n",
      :title_245a_search=>"Easy chair, ottoman, and floor cushion details_x000B_(Includes drawings by FLW; appears to be an in-progress print)", :title_245_search=>"Easy chair, ottoman, and floor cushion details_x000B_(Includes drawings by FLW; appears to be an in-progress print)", :title_sort=>"Easy chair ottoman and floor cushion detailsx000BIncludes drawings by FLW appears to be an inprogress print", :title_245a_display=>"Easy chair, ottoman, and floor cushion details_x000B_(Includes drawings by FLW; appears to be an in-progress print)", :title_display=>"Easy chair, ottoman, and floor cushion details_x000B_(Includes drawings by FLW; appears to be an in-progress print)", :title_full_display=>"Easy chair, ottoman, and floor cushion details_x000B_(Includes drawings by FLW; appears to be an in-progress print)", :author_7xx_search=>["Wright, Frank Lloyd, 1867-1959"], :author_person_facet=>["Wright, Frank Lloyd, 1867-1959"], :author_sort=>"\u{10FFFF} Easy chair ottoman and floor cushion detailsx000BIncludes drawings by FLW appears to be an inprogress print", :author_person_display=>["Wright, Frank Lloyd, 1867-1959"], :author_person_full_display=>["Wright, Frank Lloyd, 1867-1959"], :topic_search=>["diazotypes (copies)", "Paul R. Hanna House (Stanford, Calif.)", "Architecture, Modern", "Architecture", "History", "Architecture, Domestic"], :geographic_search=>["United States", "California", "California"], :subject_other_subvy_search=>["20th century", "20th century"], :subject_all_search=>["diazotypes (copies)", "Paul R. Hanna House (Stanford, Calif.)", "Architecture, Modern", "Architecture", "History", "Architecture, Domestic", "United States", "California", "California", "20th century", "20th century"], :topic_facet=>["Paul R. Hanna House (Stanford, Calif.)", "Architecture, Modern", "Architecture", "History", "Architecture, Domestic"], :geographic_facet=>["United States", "California", "California"], :era_facet=>["20th century", "20th century"], :format_main_ssim=>["Image"], :language=>["English"], :physical=>["24 x 36 inches"], :url_suppl=>["http://www.oac.cdlib.org/findaid/ark:/13030/kt238nf217/", "https://purl.stanford.edu/gb597yd7556", "http://purl.stanford.edu/jk193md4118"], :pub_year_isi=>1900, :pub_date_sort=>"1900", :pub_year_no_approx_isi=>1900, :pub_year_w_approx_isi=>1900, :imprint_display=>"1900", :creation_year_isi=>1900, :all_search=>" Easy chair, ottoman, and floor cushion details_x000B_(Includes drawings by FLW; appears to be an in-progress print) Wright, Frank Lloyd, 1867-1959 arc architect still image diazotypes (copies) 1900 1995 eng English 24 x 36 inches reformatted digital image/jpeg Paul R. Hanna House (Stanford, Calif.) Architecture, Modern 20th century United States Architecture California History 20th century Architecture, Domestic California Stanford University. Libraries. Department of Special Collections and University Archives SC0280 https://purl.stanford.edu/yc714xp8382 Hanna House Collection (SC0280) http://www.oac.cdlib.org/findaid/ark:/13030/kt238nf217/ Series 3 eng CSt Hanna House collection https://purl.stanford.edu/gb597yd7556 The materials are open for research use and may be used freely for non-commercial purposes with an attribution. For commercial permission requests, please contact the Stanford University Archives (universityarchives@stanford.edu). Architectural drawings http://purl.stanford.edu/jk193md4118 ", :pub_year_tisim=>1900, :druid=>"yc714xp8382", :url_fulltext=>"https://purl.stanford.edu/yc714xp8382", :access_facet=>"Online", :display_type=>"image", :building_facet=>"Stanford Digital Repository", :file_id=>["yc714xp8382_00_0001.jp2"], :collection=>["gb597yd7556"], :collection_with_title=>["gb597yd7556-|-Hanna house collection, 1900-1995"], "iiif_manifest_url_ssi"=>"https://purl.stanford.edu/yc714xp8382/iiif/manifest", "author_no_collector_ssim"=>["Wright, Frank Lloyd, 1867-1959"], "box_ssi"=>nil, "coordinates_tesim"=>[], "folder_ssi"=>nil, "genre_ssim"=>["diazotypes (copies)"], "geographic_srpt"=>[], "location_ssi"=>nil, "series_ssi"=>nil, "identifier_ssim"=>[], "content_metadata_type_ssim"=>["image"], "content_metadata_type_ssm"=>["image"], "content_metadata_first_image_file_name_ssm"=>["yc714xp8382_00_0001"], "content_metadata_first_image_width_ssm"=>["22662"], "content_metadata_first_image_height_ssm"=>["14158"], "content_metadata_image_iiif_info_ssm"=>["https://stacks.stanford.edu/image/iiif/yc714xp8382%2Fyc714xp8382_00_0001/info.json"], "thumbnail_square_url_ssm"=>["https://stacks.stanford.edu/image/iiif/yc714xp8382%2Fyc714xp8382_00_0001/square/100,100/0/default.jpg"], "thumbnail_url_ssm"=>["https://stacks.stanford.edu/image/iiif/yc714xp8382%2Fyc714xp8382_00_0001/full/!400,400/0/default.jpg"], "large_image_url_ssm"=>["https://stacks.stanford.edu/image/iiif/yc714xp8382%2Fyc714xp8382_00_0001/full/!1000,1000/0/default.jpg"], "full_image_url_ssm"=>["https://stacks.stanford.edu/image/iiif/yc714xp8382%2Fyc714xp8382_00_0001/full/!3000,3000/0/default.jpg"], "manuscript_number_tesim"=>["SC0280"]}
  }

  fixtures.each do |druid, expected|
    it "works for druid #{druid}" do
      actual = Spotlight::Dor::Resources.indexer.solr_document(Spotlight::Dor::Resources.indexer.resource(druid))

      expect(actual).to match expected
    end
  end
end
